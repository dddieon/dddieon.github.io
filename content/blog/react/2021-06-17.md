---
title: '[react] useRef를 반복문에서 사용하기'
date: '2021-06-17T12:48:00.100Z'
description: ref를 객체로 정의하고, 반복적으로 노드에 대한 참조값을 저장합시다.
category: react
---

> ref를 객체로 정의하고, 반복적으로 노드에 대한 참조값을 저장합시다.

## document.getElementBy를 지양하고 ref를 써야하는 이유

id는 중복선언을 하면 안된다.  
하지만 사람은 언제나 실수를 할 수 있고, id를 중복선언할 수도 있다. (...ㅇㅅa;)

이 경우에 전역적으로 작동하는 document.getElementById를 사용한다면  
의도치 않게 다른 컴포넌트에까지 영향을 끼치게 된다.

ref는 ref를 정의한 스코프 내에서만 작동하기 때문에  
id 중복으로 인해 원하지 않는 결과가 생기는 것을 방지할 수 있다.

## 단계 1. 빈 객체로 useRef 선언

```JavaScript
const myRefs = useRef({});
```

키값을 사용해야 하니 null 말고 빈 객체를 디폴트로 쓴다.

## 단계 2. 선언한 ref 객체를 반복문에 넣어준다

```JavaScript
import React, {useRef} from "react"

export default function Sample() {
    const myRefs = useRef({});
    const arrayName = [{id: 1, content: "AA"}, {id: 2, content: "BB"}, {id: 3, content: "CC"}];
    return (
        <div>
            {
                arrayName.map((item) => {
                    return (
                        <div key={item.id} ref={(element) => myRefs.current[item.content] = element}>
                            {item.content}
                        </div>
                    )
                })
            }
        </div>
    )
}
```

반복문에서 생성된 3개의 DOM 엘리먼트는 각각의 참조값을 가진다.  
이제 `myRefs.current.AA`, `myRefs.current.BB`, `myRefs.current.CC`를 사용해  
dom을 조작할 수 있게 되었다.

## 단계 3. ref 사용해보기

```
useEffect(() => {
    myRefs.current.CC.style.backgroundColor = "red"
}, []);
```

CC는 빨개진다.

끝!
